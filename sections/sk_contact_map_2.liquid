<div class="page_content_wrpper contact_page">
    <div class="page_header_warp" style="background-color:{{ section.settings.heading_bg_color }}">
        <div class="container">
            <div class="row">
                <div class="col">
                    <h1 class="page_title">
                      {% if section.settings.contact_page_title != "" %} {{ section.settings.contact_page_title }} {% else %} {{ page.title }} {% endif %}
                    </h1>
                </div>
            </div>
        </div>
    </div>
    <div class="page_content_wrap">
        <div class="container">
            <div class="row">
                <div class="col-12">
                  <div class="contact_wrapper">
                      <div class="map">
                        {% if section.settings.maps_con != blank %}
                            <div id="map" style="width:100%; height:500px; border:0" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></div>
                        {% else %}
                            {% if section.settings.maps_ifram != blank %}
                                 {{ section.settings.maps_ifram }} 
                            {% else %}
                                <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3584.0399032837367!2d-80.36213318460668!3d26.064952283500027!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x88d9a7316409f275%3A0xa289539ac08117c6!2s4474%20Weston%20Rd%2C%20Davie%2C%20FL%2033331%2C%20USA!5e0!3m2!1sen!2sbd!4v1661927684723!5m2!1sen!2sbd" width="100%" height="500" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                           {% endif %}
                        {% endif %}
                      </div>
                    <div class="contact_box">
                        <h2>{{ section.settings.contact_title }}</h2>
                        <p>{{ section.settings.contact_desc }}</p>
                        <div class="location_phone">
                            <div class="location">
                              <div class="loc">
                                {% if section.settings.location_icon != blank %} <img src="{{ section.settings.location_icon | image_url }}" /> {% else %} <img src="{{ 'near_me_be850c28-6315-4f01-8154-159a04a2dd46_256x256_crop_center.png' | asset_url }}" /> {% endif %}
                                {{ section.settings.contact_location }}
                              </div>
                              <div class="shedule">
                                {% if section.settings.time_icon != blank %} <img src="{{ section.settings.time_icon | image_url }}" /> {% else %} <img src="{{ 'schedule_dfd6eb82-5bb0-4751-99e0-e94044952cbe_256x256_crop_center.png' | asset_url }}" /> {% endif %}

                                
                                <div class="flex flex-row">
                                <div class="basis-1/2 mr-3">
                                  {%- for block in section.blocks -%}
                                   {% if block.settings.time_table_day %} {{ block.settings.time_table_day }} <br>  {% endif %}
                                    {%- endfor -%}
                                </div>
                                <div class="basis-1/2">
                                  {%- for block in section.blocks -%}
                                   {% if block.settings.time_table_time %} {{ block.settings.time_table_time }} <br>  {% endif %}
                                    {%- endfor -%}
                                </div>
                              </div>
                                
                                 
                              
                              </div>
                            </div>
                            <div class="phone">
                              {% if section.settings.phone_icon != blank %} <img src="{{ section.settings.phone_icon | image_url }}" /> {% else %} <img src="{{ 'call_f109afcb-3b54-45b1-983c-28e24c89bb84_256x256_crop_center.png' | asset_url }}" /> {% endif %}
                              <a href="tel:{% if section.settings.contact_phone != blank %} {{ section.settings.contact_phone }} {% else %} {{ settings.phone_number }} {% endif %}">{% if section.settings.contact_phone != blank %} {{ section.settings.contact_phone }} {% else %} {{ settings.phone_number }} {% endif %}</a>
                            </div>
                        </div>
                    </div>
                  </div>
                </div>
            </div>
        </div>
    </div>
</div>


{% schema %}
  {
    "name": "New Contact Map",
    "settings": [
        {
		"type": "color",
		"id": "heading_bg_color",
		"label": "Background Color",
          "default": "#474747"
		},
        {
		"type": "text",
		"id": "contact_page_title",
		"label": "Page Title",
          "default": "Contact Us"
		},
        {
		"type": "text",
		"id": "maps_con",
		"label": "Google map api key",
        "default": "AIzaSyDOhfNj2ooGEmeUa9IIXxXMlJjrN-CeTzE"
		},
        {
            "type": "html",
            "id": "maps_ifram",
            "label": "iFrame Map Code",
            "info": "It will be shown if there is no Api key"
        },
        {
            "type": "range",
            "id": "zoom",
            "min": 1,
            "max": 20,
            "step": 1,
            "unit": "m",
            "label": "Zoom",
            "default": 16
        },
        {
		"type": "text",
		"id": "contact_title",
		"label": "Title",
        "default": "Get Started With a Free Quote Today!"
		},
        {
		"type": "textarea",
		"id": "contact_desc",
		"label": "Description",
        "default": "We would love to hear from you! If you have any comments, questions, or concerns, let us know, and we will get back to you right away."
		},
        {
		"type": "image_picker",
		"id": "location_icon",
		"label": "Location Icon"
		},
        {
		"type": "text",
		"id": "contact_location",
		"label": "Location",
        "default": "2501 Byington Beaver Ridge Rd, Knoxville, TN 37931, United States"
		},
        
        {
		"type": "image_picker",
		"id": "phone_icon",
		"label": "Phone Icon"
		},
        {
		"type": "text",
		"id": "contact_phone",
		"label": "Phone",
        "default": "555-555-5555"
		},
        {
		"type": "image_picker",
		"id": "time_icon",
		"label": "Time Icon"
		}
    ],
  "max_blocks": 7,
  "blocks": [
     {
       "name": "Schedule (open hours)",
       "type": "text",
       "settings": [
         {
        "type": "text",
		"id": "time_table_day",
		"label": "The Day",
        "default": "Monday"
         },
         {
        "type": "text",
		"id": "time_table_time",
		"label": "The Time",
        "default": "9 AM - 5:30 PM"
         }
         
       ]
     }
     
  ],
  "presets": [
    {
        "name": "New Contact Map"
    }
 ]
  }
{% endschema %}
{% if section.settings.maps_con != blank %}
    <div id = "output"> </div>
    <script defer="defer">
        console.log("herhehehr")
        var apikey = "{{section.settings.maps_con}}"
        var street = "{{section.settings.contact_location}}"
        // Initialize and add the map
        function initMap() {
            const geocoder = new google.maps.Geocoder();
            var location;
            geocoder.geocode({ 'address': street }, (res, status) => {
              console.log(res, status)
              if (status == google.maps.GeocoderStatus.OK) {
                console.log(JSON.stringify(res[0].geometry.location.lat()))
                location = { lat: Number(JSON.stringify(res[0].geometry.location.lat())), lng: Number(JSON.stringify(res[0].geometry.location.lng())) };
                const map = new google.maps.Map(document.getElementById("map"), {
                    zoom: {{ section.settings.zoom}},
                    center: location,
                });
                    // The marker, positioned at Uluru
                const marker = new google.maps.Marker({
                    position: location,
                    map: map,
                });
              } 
            })
            
        }
        window.initMap = initMap;
        var google_api = document.createElement("script");
        google_api.src = "https://maps.googleapis.com/maps/api/js?key="+ apikey +"&callback=initMap&v=weekly";
        google_api.defer = "defer";
        document.getElementById("output").appendChild(google_api);
    
    
       
    
    </script>
        
{% endif %}
